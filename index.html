<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MHCP - Worlds 101</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <style>
        /* Try to use Optimistic if available on the system */
        @font-face {
            font-family: 'Optimistic';
            src: local('Optimistic'), local('Optimistic Regular'), local('Optimistic Text'), local('OptimisticText-Regular'), local('Optimistic Display');
            font-weight: 100 900;
            font-style: normal;
            font-display: swap;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Optimistic', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: rgba(255, 255, 255, 0.95);
            color: rgb(70, 90, 105);
            line-height: 1.6;
            padding: 20px 0;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
        }

        .timeline {
            --start-size: 200px;
            --end-size: 250px;
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            top: var(--start-size);
            height: calc(100% - var(--start-size) - var(--end-size));
            background: #bdc0c4;
            border-radius: 2px;
            z-index: 1;
        }

        .start-circle, .end-circle {
            width: 100%;
            max-width: 720px;
            min-height: var(--start-size);
            border-radius: 24px;
            background-image: url('images/meta-gradient_light_fluid_fade-blue_16_9.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px 28px;
            margin: 0 auto 40px auto;
            position: relative;
            z-index: 5;
        }

        .start-circle h1, .end-circle h2 {
            color: rgb(70, 90, 105);
            text-align: center;
            font-size: 1.4rem;
            line-height: 1.4;
            font-weight: bold;
            padding: 0;
        }

        .end-circle {
            margin-top: 40px;
            min-height: var(--end-size);
        }

        .step {
            display: grid;
            grid-template-columns: 1fr 80px 1fr;
            column-gap: 20px;
            margin-bottom: 60px;
            position: relative;
            align-items: center;
            z-index: 2;
        }

        .step-content {
            background: #f2f4f7;
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin: 0;
            border: none;
            position: relative;
            grid-column: 3;
        }

        .step-number {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            grid-column: 2;
            justify-self: center;
            z-index: 3;
        }

        /* Alternate step content to left on even rows */
        .step:nth-child(even) .step-content {
            grid-column: 1;
        }

        .step-title {
            color: rgb(70, 90, 105);
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 15px;
            padding-top: 10px;
        }

        .step-description {
            color: rgb(70, 90, 105);
            font-size: 1rem;
            margin-bottom: 15px;
            text-align: left;
        }

        .step-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .step-links li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        /* Arrow for top-level items only */
        .step-links > li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: #74b9ff;
            font-weight: bold;
        }

        /* Nested subitems: remove default bullets and use a subtle dash */
        .step-links ul {
            list-style: none;
            margin: 6px 0 0 0;
            padding-left: 14px;
        }
        .step-links ul li {
            margin-bottom: 6px;
            padding-left: 16px;
        }
        .step-links ul li::before {
            content: '–';
            position: absolute;
            left: 0;
            color: #95a5a6;
            font-weight: 700;
        }

        .step-links a {
            color: rgb(0, 100, 224);
            text-decoration: none;
            font-weight: 500;
            transition: text-decoration 0.3s ease;
        }

        .step-links a:hover {
            color: rgb(0, 100, 224);
            text-decoration: underline;
        }

    /* What's Next: use icons instead of arrows */
    .whats-next .step-links > li::before { content: none; }
    .whats-next .step-links > li { padding-left: 0; }
    .whats-next .item-icon { margin-right: 8px; font-size: 1.05rem; line-height: 1; }

        /* Non-list separators like "and/or" between groups */
        .list-separator {
            text-align: center;
            margin: 6px 0 8px 0;
            color: rgb(70, 90, 105);
            font-weight: 600;
        }

        .step-code {
            background: #f8fafc; /* light background */
            color: #1f2937; /* dark text */
            padding: 10px 14px;
            border-radius: 8px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            border-left: 4px solid #0984e3; /* accent */
            overflow-x: auto;
            white-space: pre; /* preserve formatting */
        }

        /* Inline code styling (light theme) */
        code {
            background: rgba(0,0,0,0.06);
            color: #1f2937;
            padding: 0.1em 0.35em;
            border-radius: 4px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
            font-size: 0.95em;
        }

        /* Step subtitles and secondary lists */
        .step-subtitle {
            font-weight: 600;
            color: rgb(70, 90, 105);
            margin: 10px 0 8px 0;
        }
        .step-links.secondary {
            margin-top: 6px;
        }

        /* Challenge drawer that visually pops from the step */
        .challenge {
            position: relative;
            margin: 10px 0 0 0; /* align within the card */
            padding: 12px 14px;
            border-radius: 10px;
            background: rgba(9, 132, 227, 0.04);
            border: 1px solid rgba(9, 132, 227, 0.18);
            border-left: 4px solid #0984e3;
        }
        .challenge::before { content: none; }
        .challenge-title {
            font-weight: 700;
            color: #0b3d91;
            margin: 0 0 8px 0;
            font-size: 0.95rem;
            letter-spacing: 0.2px;
        }
        .challenge .step-links.secondary {
            margin-top: 4px;
        }

        @media (min-width: 769px) {
            .step-number {
                width: 70px;
                height: 70px;
                font-size: 1.3rem;
                border-radius: 20px;
            }
            /* Center steps on the vertical line for desktop */
            .step { display: block; }
            .step-content { margin: 0 auto; width: 100%; max-width: 720px; grid-column: auto; }
            .step:nth-child(even) .step-content { grid-column: auto; }
        }

        @media (max-width: 768px) {
            .timeline { --start-size: 150px; --end-size: 180px; }

            .timeline::before {
                left: 50%;
                transform: translateX(-50%);
            }

            .step {
                display: block;
                position: relative;
                padding-left: 0;
                margin-left: 0;
            }

            .step-number {
                position: absolute;
                left: 35px;
                top: 0;
                transform: translateX(-50%);
                width: 60px;
                height: 60px;
                font-size: 1.1rem;
                border-radius: 15px;
            }

            .step-content {
                margin: 0 auto;
                width: 100%;
                max-width: 640px;
            }

            .start-circle, .end-circle {
                width: 100%;
                max-width: 100%;
                min-height: var(--start-size);
            }

            .start-circle h1, .end-circle h2 {
                font-size: 1.1rem;
                padding: 0;
            }

            .end-circle {
                min-height: var(--end-size);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }
            
            .step {
                padding-left: 0;
            }
            
            .step-number {
                left: 30px;
                width: 50px;
                height: 50px;
                font-size: 1rem;
                border-radius: 12px;
            }
            
            .timeline::before {
                left: 50%;
                transform: translateX(-50%);
            }

            .intro-section {
                padding: 25px 15px;
            }
        }

        .highlight-text {
            background: linear-gradient(135deg, #0064e0, #00a6fb, #0099ff, #7c4dff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .intro-text {
            text-align: center;
            color: white;
            font-size: 1.1rem;
            margin-bottom: 40px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .intro-section {
            background: #f2f4f7;
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 60px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            text-align: center;
        }
    /* Keep text readable inside white cards */
    .intro-section, .step-content { color: rgb(70, 90, 105); }

        /* What's Next section should appear above the timeline line */
        .whats-next {
            position: relative;
            z-index: 4;
        }

        .main-title {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, #0064e0, #00a6fb, #0099ff, #7c4dff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: rgb(70, 90, 105);
            margin-bottom: 30px;
            font-weight: 300;
        }

        .intro-content p {
            font-size: 1.1rem;
            color: rgb(70, 90, 105);
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .feature {
            background: rgba(116, 185, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(116, 185, 255, 0.2);
        }

        .feature-icon {
            font-size: 2.5rem;
            display: block;
            margin-bottom: 15px;
        }

        .feature h3 {
            color: rgb(70, 90, 105);
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .feature p {
            color: rgb(70, 90, 105);
            font-size: 0.95rem;
            margin-bottom: 0 !important;
        }

        .journey-text {
            font-size: 1.2rem !important;
            font-weight: 500;
            background: linear-gradient(135deg, #0064e0, #00a6fb, #0099ff, #7c4dff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0 !important;
        }

        @media (max-width: 768px) {
            .intro-section {
                padding: 30px 20px;
                margin-bottom: 40px;
            }

            .main-title {
                font-size: 2.2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin: 30px 0;
            }

            .feature {
                padding: 20px;
            }

            .feature-icon {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .intro-content p {
                font-size: 1rem;
            }
        }

        /* Intro Image */
        .intro-image {
            display: block;
            max-width: 480px;
            width: 100%;
            height: auto;
            margin: 20px auto 0 auto;
            border-radius: 20px;
        }

    /* Numbers are now in titles; hide separate tile */
    .step-number { display: none; }

        /* Sticky category nav */
        html { scroll-behavior: smooth; }
        .sticky-nav {
            position: sticky;
            top: 10px;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 999px;
            padding: 10px 14px;
            margin: -10px auto 16px auto;
            width: fit-content;
        }
        .sticky-nav .nav-link {
            color: #0064E0;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            padding: 6px 10px;
            border-radius: 8px;
            white-space: nowrap;
        }
        .sticky-nav .nav-link:hover {
            background: #0064E0;
            color: white;
        }
        .sticky-nav .nav-link.active,
        .sticky-nav .nav-link[aria-current="page"] {
            background: #0064E0;
            color: #fff;
        }
        .sticky-nav .dot { color: #95a5a6; }
        .category { scroll-margin-top: 110px; }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        @media (max-width: 768px) {
            .sticky-nav {
                top: 8px;
                gap: 6px;
                padding: 8px 10px;
                border-radius: 14px;
                /* Make it fit without hamburger: single-line, scrollable */
                width: 100%;
                max-width: 100%;
                margin-left: auto;
                margin-right: auto;
                justify-content: center;
                overflow-x: auto;
                overscroll-behavior-x: contain;
                -webkit-overflow-scrolling: touch;
                white-space: nowrap;
                scroll-snap-type: x proximity;
            }
            .sticky-nav .nav-link {
                font-size: 0.8rem;
                padding: 6px 8px;
                flex: 0 0 auto;
                scroll-snap-align: center;
            }
            .sticky-nav > * { flex: 0 0 auto; }
            .sticky-nav { scrollbar-width: none; }
            .sticky-nav::-webkit-scrollbar { display: none; }
            .category { scroll-margin-top: 100px; }
        }
        @media (max-width: 480px) {
            /* Save space on very small screens */
            .sticky-nav .dot { display: none; }
            .sticky-nav { gap: 4px; padding: 8px; }
            .sticky-nav .nav-link { font-size: 0.75rem; padding: 6px 8px; }
        }
        /* End links below the completion banner */
    .end-links { text-align: center; margin: 8px 0 40px 0; }
    .end-links .end-link { color: #0984e3; font-weight: 600; text-decoration: underline; margin: 0 16px; }
    .end-links .dot { color: #636e72; margin: 0 8px; }

        @media (max-width: 768px) {
            .end-links .end-link { 
                font-size: 0.9rem; 
                margin: 0 12px; 
            }
        }

        @media (max-width: 480px) {
            .end-links .end-link { 
                font-size: 0.8rem; 
                margin: 0 8px; 
            }
        }

        /* Step completion toggle */
        .step-content { position: relative; }
        .complete-toggle {
            /* Place at the bottom within normal flow and center it */
            margin: 16px -25px -25px -25px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: calc(100% + 50px);
            gap: 8px;
            background: rgb(222, 227, 233);
            border: none;
            border-radius: 0 0 20px 20px;
            padding: 16px 25px;
            font-size: 0.9rem;
            color: rgb(70, 90, 105);
            cursor: pointer;
            user-select: none;
        }
        .complete-toggle input[type="checkbox"] {
            width: 18px; height: 18px;
            accent-color: #2ecc71;
            cursor: pointer;
        }
        .step-content.completed {
            border: 1px solid rgba(46, 204, 113, 0.45);
        }
        .step-content.completed .step-title::after {
            content: '✓ Completed';
            margin-left: 8px;
            font-size: 0.85rem;
            font-weight: 700;
            color: #2ecc71;
        }

        /* Progress Bar */
        .progress-bar-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding: 8px 16px 4px 16px;
        }
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            font-size: 0.75rem;
            color: rgb(70, 90, 105);
        }
        .progress-text {
            font-weight: 600;
        }
        .progress-text.completed {
            color: #2ecc71;
        }
        .progress-bar {
            width: 100%;
            height: 4px;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 2px;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #0064e0, #00a6fb, #0099ff, #7c4dff);
            transition: width 0.3s ease, background 0.3s ease;
            border-radius: 2px;
        }
        .progress-fill.completed {
            background: linear-gradient(90deg, #2ecc71, #27ae60, #2ecc71);
        }
        @media (max-width: 768px) {
            .progress-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 2px;
            }
            .section-progress {
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body id="top">
    <div class="container">
        <!-- Intro Section -->
        <div class="intro-section">
            <h1 class="main-title">Welcome to Worlds 101</h1>
            <p class="subtitle">This is a simple, step‑by‑step path designed by MHCP Mentors to help you build and publish your first world.</p>
            <div class="intro-content">
                <p>We’ll keep things practical and short. Follow the steps below and you’ll be creating, testing, and sharing your world in no time.</p>
                <p>This guide links to the official Meta documentation—open those docs to complete each step, then come back here to continue the path.</p>
            </div>
        </div>

        <!-- Sticky Category Navigation -->
        <nav class="sticky-nav" aria-label="Section navigation">
            <a class="nav-link" href="#tools-account">Tools &amp; Account</a>
            <a class="nav-link" href="#world-assets">World &amp; Assets</a>
            <a class="nav-link" href="#code-systems">Code &amp; Systems</a>
        </nav>

        <div class="timeline">
            <div class="start-circle">
                <h1>We’ll guide you through each step—<br>let’s get started.</h1>
            </div>
            
            <!-- Category: Tools & Account -->
            <section id="tools-account" class="category" aria-labelledby="tools-account-label">
                <h2 id="tools-account-label" class="sr-only">Tools &amp; Account</h2>
            <!-- Step 1: Read System Requirements -->
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h3 class="step-title">1. Read System Requirements</h3>
                    <p class="step-description">Let's get started by verifying you have the right environment to start developing and testing your World. Check these hardware requirements:</p>
                    <ul class="step-links">
                        <li><a href="https://www.meta.com/help/quest/140991407990979/" target="_blank" rel="noopener noreferrer">Do you have a Windows PC?</a></li>
                        <li><a href="https://www.meta.com/help/quest/1178714089211378/?srsltid=AfmBOop_RFEsVWRm0l-ydXbLnyzafgMahmgjdVh4hJ9XrRs_zJ5c1dIa" target="_blank" rel="noopener noreferrer">Do you have a mobile device with the Meta Horizon app installed?</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 2: Download Worlds Desktop Editor -->
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h3 class="step-title">2. Download Worlds Desktop Editor</h3>
                    <p class="step-description">Now let's install the applications that you will use during your world creation:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/get-started/install-desktop-editor#install-the-desktop-editor" target="_blank" rel="noopener noreferrer">Download the Worlds Desktop Editor</a></li>
                        <li><a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer">Download Visual Studio Code for script creation and modification</a></li>
                    </ul>
                    <div class="challenge">
                        <div class="challenge-title">Challenge Yourself</div>
                        <ul class="step-links secondary">
                            <li><a href="https://developers.meta.com/horizon-worlds/learn/videos/configuring-your-dev-environment/" target="_blank" rel="noopener noreferrer">Watch a video on configuring your development environment and complete the Hands-on Challenge</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Step 3: Create a Meta Account -->
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h3 class="step-title">3. Create a Meta Account</h3>
                    <p class="step-description">You've successfully set up your world creation environment! Great job! Let's log in and create an avatar to start you on your world creation journey:</p>
                    <ul class="step-links">
                        <li><a href="https://quest.meta.com/avatar" target="_blank" rel="noopener noreferrer">Create a Meta Horizon Avatar</a></li>
                    </ul>
                </div>
            </div>
            </section>

            <!-- Category: World & Assets -->
            <section id="world-assets" class="category" aria-labelledby="world-assets-label">
                <h2 id="world-assets-label" class="sr-only">World &amp; Assets</h2>
            <!-- Step 4: Create New World -->
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h3 class="step-title">4. Create New World</h3>
                    <p class="step-description">You’re ready to start building in the metaverse! Every masterpiece starts as a blank canvas. In Meta Horizon, you start on a blank world! Open the Worlds Desktop Editor and log in with your new account. Then, create a new world:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/get-started/create-your-first-world#step-1-create-a-new-world" target="_blank" rel="noopener noreferrer">Press the New World button in Creation Home</a></li>
                    </ul>
                    <div class="list-separator"><span class="highlight-text">or</span></div>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/tutorial-worlds/getting-started-with-tutorials/access-tutorial-worlds" target="_blank" rel="noopener noreferrer">Create Tutorial World to jump into complete examples</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 5: Move Around the World -->
            <div class="step">
                <div class="step-number">5</div>
                <div class="step-content">
                    <h3 class="step-title">5. Move Around the World</h3>
                    <p class="step-description">Pretty simple, right? Let's explore the blank world for a moment:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/getting-started/user-interface/primary_tools#camera-speed-controls" target="_blank" rel="noopener noreferrer">Fly around in Build mode by holding right-click and pressing WASD</a></li>
                    </ul>
                    <div class="list-separator"><span class="highlight-text">and</span></div>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/getting-started/user-interface/operational-modes" target="_blank" rel="noopener noreferrer">Enter Preview mode to walk around with your avatar</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 6: Generate a 3D Model -->
            <div class="step">
                <div class="step-number">6</div>
                <div class="step-content">
                    <h3 class="step-title">6. Generate a 3D Model</h3>
                    <p class="step-description">You're making great progress jumping into this new territory! Let's give it a personal touch by creating your world's very first 3D model:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/generative-ai-creation-tools/generative-ai-mesh-generation-tool#generate-a-mesh-with-mesh-gen-11" target="_blank" rel="noopener noreferrer">Add a generated mesh</a></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/getting-started/user-interface/object-tools" target="_blank" rel="noopener noreferrer">Reposition the mesh</a></li>
                    </ul>
                    <div class="challenge">
                        <div class="challenge-title">Challenge Yourself</div>
                        <ul class="step-links secondary">
                            <li><a href="https://developers.meta.com/horizon-worlds/learn/videos/custom-meshes-with-genai/" target="_blank" rel="noopener noreferrer">Watch a video on creating meshes with GenAI and complete the Hands-on Challenge</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Step 7: Generate a Skybox -->
            <div class="step">
                <div class="step-number">7</div>
                <div class="step-content">
                    <h3 class="step-title">7. Generate a Skybox</h3>
                    <p class="step-description">You have great taste! Let's explore that creativity even further! We'll add some environment to your world by generating a sky:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/generative-ai-creation-tools/generative-ai-skybox-tool" target="_blank" rel="noopener noreferrer">Add a generated sky</a></li>
                    </ul>
                    <div class="challenge">
                        <div class="challenge-title">Challenge Yourself</div>
                        <ul class="step-links secondary">
                            <li><a href="https://developers.meta.com/horizon-worlds/learn/videos/creating-a-custom-skybox/" target="_blank" rel="noopener noreferrer">Watch a video on creating skyboxes with GenAI and complete the Hands-on Challenge</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Step 8: Publish world -->
            <div class="step">
                <div class="step-number">8</div>
                <div class="step-content">
                    <h3 class="step-title">8. Publish Your First World</h3>
                    <p class="step-description">You may not realize this yet, but you are officially a <span class="highlight-text">World Creator</span>! It's time to share your awesome progress by publishing a public version of your world, making it possible for others to visit your world:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/save-optimize-and-publish/publish-your-world" target="_blank" rel="noopener noreferrer">Publish your world</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 9: Open on Mobile -->
            <div class="step">
                <div class="step-number">9</div>
                <div class="step-content">
                    <h3 class="step-title">9. Open on Mobile</h3>
                    <p class="step-description">Now you can tell your friends to look up your world name on the Meta Horizon app on their mobile device! You can find a shareable link by finding your world on the Creator Tools website, too:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/create-for-web-and-mobile/how-to-test-on-web-and-mobile#mobile" target="_blank" rel="noopener noreferrer">Open your world page on mobile</a></li>
                    </ul>
                </div>
            </div>
            </section>

            <!-- Category: Code & Systems -->
            <section id="code-systems" class="category" aria-labelledby="code-systems-label">
                <h2 id="code-systems-label" class="sr-only">Code &amp; Systems</h2>
            <!-- Step 10: Create a Script -->
            <div class="step">
                <div class="step-number">10</div>
                <div class="step-content">
                    <h3 class="step-title">10. Create a Script</h3>
                    <p class="step-description">It's time to level up with some simple scripting! We'll be creating a simple respawn script. Let's start here:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/getting-started/using-typescript-in-horizon-worlds" target="_blank" rel="noopener noreferrer">Create a script</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 11: Create Custom Properties -->
            <div class="step">
                <div class="step-number">11</div>
                <div class="step-content">
                    <h3 class="step-title">11. Create Custom Properties</h3>
                    <p class="step-description">Excellent work! Now let's enhance the script by adding a custom property:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/getting-started/typescript-components-properties-and-variables" target="_blank" rel="noopener noreferrer">Add an entity property called "spawnPoint"</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 12: Place a Trigger Gizmo -->
            <div class="step">
                <div class="step-number">12</div>
                <div class="step-content">
                    <h3 class="step-title">12. Place a Trigger Gizmo</h3>
                    <p class="step-description">You're getting the hang of this! Time to bring in the trigger gizmo:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/code-blocks-and-gizmos/use-the-trigger-zone" target="_blank" rel="noopener noreferrer">Add trigger gizmo</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 13: Attaching the Script to the Trigger -->
            <div class="step">
                <div class="step-number">13</div>
                <div class="step-content">
                    <h3 class="step-title">13. Attaching the Script to the Trigger</h3>
                    <p class="step-description">Get ready for the best part! Let's put it all together:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/getting-started/adding-and-editing-scripts#adding-an-existing-script-to-an-entity" target="_blank" rel="noopener noreferrer">Attach the script to the trigger</a></li>
                        <li>Drag and drop the spawn point gizmo onto the newly added entity property</li>
                        <li>Try walking into the trigger in preview mode</li>
                    </ul>
                </div>
            </div>

            <!-- Step 14: Create Entity -->
            <div class="step">
                <div class="step-number">14</div>
                <div class="step-content">
                    <h3 class="step-title">14. Create Entity</h3>
                    <p class="step-description">If you've made it this far, then you REALLY want to step your world creation skills up! Let's learn about creating empty objects:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/hierarchy-window/hierarchy-window-overview#empty-objects" target="_blank" rel="noopener noreferrer">Add an empty object</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 15: Adding Children -->
            <div class="step">
                <div class="step-number">15</div>
                <div class="step-content">
                    <h3 class="step-title">15. Adding Children</h3>
                    <p class="step-description">Very nice! Empty objects really shine when you add child objects to them. Let's turn this empty object into a ball:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/assets/public-asset-library" target="_blank" rel="noopener noreferrer">Place a ball from the Public Assets into the world</a></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/hierarchy-window/hierarchy-window-overview#parent-anything-to-anything" target="_blank" rel="noopener noreferrer">In the hierarchy, drag and drop the ball onto the empty object to make it a child</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 16: Enable Grab and Physics -->
            <div class="step">
                <div class="step-number">16</div>
                <div class="step-content">
                    <h3 class="step-title">16. Enable Grab and Physics</h3>
                    <p class="step-description">How about we turn on some fun interactivity? Let's make this entity grabbable and physics-enabled:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/create-for-web-and-mobile/grabbable-entities/create-grabbable-entities" target="_blank" rel="noopener noreferrer">Set the entity's Motion property to Interactive and Interaction to Both (Grabbable and Physics)</a></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/physics#physics-settings" target="_blank" rel="noopener noreferrer">Adjust the physics settings to your liking</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 17: Modifying Grab Settings -->
            <div class="step">
                <div class="step-number">17</div>
                <div class="step-content">
                    <h3 class="step-title">17. Modifying Grab Settings</h3>
                    <p class="step-description">The fun is just getting started! Try changing some other settings on the entity:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/create-for-web-and-mobile/grabbable-entities/avatar-poses" target="_blank" rel="noopener noreferrer">Try different avatar grip poses</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 18: Debugging -->
            <div class="step">
                <div class="step-number">18</div>
                <div class="step-content">
                    <h3 class="step-title">18. Debugging</h3>
                    <p class="step-description">You're glowing from all of the skills you've gained! It's time to sharpen your tools by learning about debugging:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/getting-started/editor-console" target="_blank" rel="noopener noreferrer">Familiarize yourself with the Console tab</a></li>
                        <li>Put your skills to the test by creating another scripted trigger</li>
                        <li>On its OnPlayerEnterTrigger function, add this line of code:</li>
                    </ul>
                    <div class="step-code">console.log("Hello World")</div>
                </div>
            </div>

            <!-- Step 19: Apply Custom Player Velocity -->
            <div class="step">
                <div class="step-number">19</div>
                <div class="step-content">
                    <h3 class="step-title">19. Apply Custom Player Velocity</h3>
                    <p class="step-description">You should be very proud of your progress! For doing such a great job, let's have some more fun! How about we launch your avatar into the air?</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/settings-modifications/player-settings-modification" target="_blank" rel="noopener noreferrer">Edit the Player Settings to enable Custom Player Movement</a></li>
                        <li>Add this line of code to the scripted trigger's OnPlayerEnterTrigger function:</li>
                    </ul>
                    <div class="step-code">player.velocity.set(Vec3.up.mul(500))</div>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/reference/2.0.0/core_player#velocity" target="_blank" rel="noopener noreferrer">Check the API for more information on player velocity</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 20: Create Local Script -->
            <div class="step">
                <div class="step-number">20</div>
                <div class="step-content">
                    <h3 class="step-title">20. Create Local Script</h3>
                    <p class="step-description">What'd you think of that last section? Pretty wild stuff, huh? Now we are going to turn the difficulty up a bit. Let’s get ready to implement custom player controls. First, we need to create a Local Script. Let’s set one up now:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/local-scripting/getting-started-with-local-scripting" target="_blank" rel="noopener noreferrer">Attach a new script to the ball and set it to Local Execution Mode</a></li>
                    </ul>
                    <div class="challenge">
                        <div class="challenge-title">Challenge Yourself</div>
                        <ul class="step-links secondary">
                            <li><a href="https://developers.meta.com/horizon-worlds/learn/videos/sending-receiving-and-ownership-in-scripting" target="_blank" rel="noopener noreferrer">Watch a video on local scripting and complete the Hands-on Challenge</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Step 21: Create Custom Player Control -->
            <div class="step">
                <div class="step-number">21</div>
                <div class="step-content">
                    <h3 class="step-title">21. Create Custom Player Control</h3>
                    <p class="step-description">You've got this! Custom player controls can only be added to local scripts. So let’s implement it into our new script:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/create-for-web-and-mobile/typescript-apis-for-mobile/custom-input-api" target="_blank" rel="noopener noreferrer">Add PlayerControls to the ball script</a></li>
                        <li>In the button callback, add the following line:</li>
                    </ul>
                    <div class="step-code">this.entity.as(GrabbableEntity).forceHold(this.entity.owner.get(), Handedness.Right, true)</div>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/reference/2.0.0/core_grabbableentity#forcehold" target="_blank" rel="noopener noreferrer">Check the API for more information on forceHold</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 22: Tagging objects -->
            <div class="step">
                <div class="step-number">22</div>
                <div class="step-content">
                    <h3 class="step-title">22. Tagging objects</h3>
                    <p class="step-description">Do you feel like you’re <span class="highlight-text">Thor</span> calling back your hammer? Let’s start turning interaction into a game mechanic:</p>
                    <ul class="step-links">
                        <li>Create another scripted trigger, but this time set it to Objects Tagged
                            <ul>
                                <li>Type a tag name, like "ball" into the tag input</li>
                            </ul>
                        </li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/gameplay-tags-api/introduction-to-gameplay-tags" target="_blank" rel="noopener noreferrer">Add the tag to the ball entity</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 23: Create UI -->
            <div class="step">
                <div class="step-number">23</div>
                <div class="step-content">
                    <h3 class="step-title">23. Create UI</h3>
                    <p class="step-description">You're leveling up like a <span class="highlight-text">champ</span>! Let’s set up your player user interface so you can keep score:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/custom-ui/creating-a-custom-ui-panel" target="_blank" rel="noopener noreferrer">Add Custom UI Gizmo</a></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/custom-ui/noninteractive-custom-ui-screen-overlay" target="_blank" rel="noopener noreferrer">Set the Custom UI Display Mode property to Screen Overlay</a></li>
                    </ul>
                </div>
            </div>

            <!-- Step 24: Create UI Binding -->
            <div class="step">
                <div class="step-number">24</div>
                <div class="step-content">
                    <h3 class="step-title">24. Create UI Binding</h3>
                    <p class="step-description">You’re doing great! Let’s set the UI up to show player score:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/getting-started/modules-and-global-functions" target="_blank" rel="noopener noreferrer">Create a module file</a></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/custom-ui/building-dynamic-custom-ui#updating-ui-with-binding" target="_blank" rel="noopener noreferrer">Add a string binding to the module file</a>
                            <ul>
                                <li>Import the binding into your UI script and your Object Trigger script</li>
                                <li>Add a score variable to the Object Trigger class</li>
                                <li>Increment the score by one every time object enters trigger</li>
                                <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/custom-ui/building-dynamic-custom-ui">Call the set function on the binding and pass in the incremented score</a></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="challenge">
                        <div class="challenge-title">Challenge Yourself</div>
                        <ul class="step-links secondary">
                            <li><a href="https://developers.meta.com/horizon-worlds/learn/videos/building-game-elements-with-custom-uis" target="_blank" rel="noopener noreferrer">Watch a video on interactive UIs and complete the Hands-on Challenge</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Step 25: Use Player Persistence -->
            <div class="step">
                <div class="step-number">25</div>
                <div class="step-content">
                    <h3 class="step-title">25. Use Player Persistence</h3>
                    <p class="step-description">You're getting the hang of this! Let’s persist the score you already show in your UI so players keep progress between visits:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/getting-started/persistent-variables-v2" target="_blank" rel="noopener noreferrer">Create a Variable Group with a number Player Persistent Variable (PPV)</a></li>
                        <li>In your Object Trigger Script (the one that increments score)
                            <ul>
                                <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/getting-started/persistent-variables-v2#setplayervariable" target="_blank" rel="noopener noreferrer">Set the PPV whenever you change the score binding</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Step 26: Create a Quest -->
            <div class="step">
                <div class="step-number">26</div>
                <div class="step-content">
                    <h3 class="step-title">26. Create a Quest</h3>
                    <p class="step-description">Now that you are a programmer, it’s time to become a <span class="highlight-text">Pro Gamer</span>! Let’s create a score milestone quest that uses your existing PPV and leaderboard:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/quests-leaderboards-and-variable-groups/quests-overview" target="_blank" rel="noopener noreferrer">Learn about Quests and how they motivate players</a></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/quests-leaderboards-and-variable-groups/quests-overview" target="_blank" rel="noopener noreferrer">Create Quests in the Creator Tools</a>
                            <ul>
                                <li>Define a quest like “Score 10 points”</li>
                                <li>Link the quest’s progress to your score PPV so it auto-completes when the value reaches the target</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Step 27: Create Custom Events -->
            <div class="step">
                <div class="step-number">27</div>
                <div class="step-content">
                    <h3 class="step-title">27. Create Custom Events</h3>
                    <p class="step-description">You're nailing these concepts! Let’s update the Object Trigger script to broadcast an event other systems can listen to:</p>
                    <ul class="step-links">
                        <li>In the Object Trigger Script
                            <ul>
                                <li>Create a <code>maxScore</code> variable</li>
                                <li>When the score changes, check to see if score reached <code>maxScore</code></li>
                                <li>If they are equal
                                    <ul>
                                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/events/broadcast-events" target="_blank" rel="noopener noreferrer">Send a local broadcast event</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Step 28: Activate Special Effects -->
            <div class="step">
                <div class="step-number">28</div>
                <div class="step-content">
                    <h3 class="step-title">28. Activate Special Effects</h3>
                    <p class="step-description">Time to juice up the world! You can make the world come alive with audio and visual effects:</p>
                    <ul class="step-links">
                        <li>Attach a new script to a new Empty Object
                            <ul>
                                <li>Name the script <strong>EffectsManager</strong></li>
                                <li>Add <code>sfx</code> and <code>vfx</code> properties</li>
                                <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/events/broadcast-events#subscribing-to-broadcast-events" target="_blank" rel="noopener noreferrer">Add a listener for the local broadcast event</a></li>
                            </ul>
                        </li>
                        <li>Add a generated sound effect to the world
                            <ul>
                                <li>Wire it up to the EffectsManager <code>sfx</code> property</li>
                            </ul>
                        </li>
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/desktop-editor/assets/public-asset-library" target="_blank" rel="noopener noreferrer">Search the Public Assets for an effect</a>
                            <ul>
                                <li>Wire it up to the EffectsManager <code>vfx</code> property</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            

            <!-- Step 29: Using Timers -->
            <div class="step">
                <div class="step-number">29</div>
                <div class="step-content">
                    <h3 class="step-title">29. Using Timers</h3>
                    <p class="step-description">Feels pretty magical, right? Let’s make the score reset after a few seconds:</p>
                    <ul class="step-links">
                        <li>Create a new module called <strong>GameData</strong> and add the following line:</li>
                    </ul>
                    <div class="step-code">export const gameData = { score: 0 }</div>
                    <ul class="step-links">
                        <li>In the Object Trigger script
                            <ul>
                                <li>Replace the <code>score</code> variable with <code>gameData.score</code></li>
                            </ul>
                        </li>
                        <li>Attach a new script to a new Empty Object
                            <ul>
                                <li>Name the script <strong>GameManager</strong></li>
                                <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/typescript/events/broadcast-events#subscribing-to-broadcast-events" target="_blank" rel="noopener noreferrer">Add a listener for the local broadcast event</a></li>
                                <li>In the event callback, add the following line:</li>
                            </ul>
                        </li>
                    </ul>
                    <div class="step-code">this.async.setTimeout(() =&gt; { /*Add Reset Logic Here*/ }, 3000);</div>
                    <ul class="step-links">
                        <li>The reset logic should reset both the UI binding and <code>gameData.score</code></li>
                        <li><a href="https://developers.meta.com/horizon-worlds/reference/2.0.0/core_component#properties" target="_blank" rel="noopener noreferrer">Check the API for more information on the Component’s async property</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Step 30: Republish Your World -->
            <div class="step">
                <div class="step-number">30</div>
                <div class="step-content">
                    <h3 class="step-title">30. Republish Your World</h3>
                    <p class="step-description">Amazing job! Ship your latest changes so others can try them:</p>
                    <ul class="step-links">
                        <li><a href="https://developers.meta.com/horizon-worlds/learn/documentation/save-optimize-and-publish/publish-your-world" target="_blank" rel="noopener noreferrer">Publish your world again</a></li>
                    </ul>
                </div>
            </div>
            </section>

            

            <div class="end-circle">
                <h2>🎉 Congratulations!<br><br>You've completed the learning path!</h2>
            </div>
            
            <!-- What's Next Section -->
        <section class="whats-next intro-section" aria-labelledby="whats-next-title">
                <h3 id="whats-next-title" class="step-title" style="text-align:center; padding-top:0; margin-bottom:16px;">What’s next</h3>
                <ul class="step-links" style="max-width:720px; margin:0 auto; text-align:left;">
            <li><span class="item-icon" aria-hidden="true">💬</span><a href="https://communityforums.atmeta.com/category/Meta_Horizon_Creator_Forums" target="_blank" rel="noopener noreferrer">Creator Forum</a> – Connect with other creators to ask questions and share your work</li>
            <li><span class="item-icon" aria-hidden="true">📚</span><a href="https://developers.meta.com/horizon-worlds/learn" target="_blank" rel="noopener noreferrer">Learn Homepage</a> – Find more Meta-made documentation and tutorials for learning</li>
            <li><span class="item-icon" aria-hidden="true">▶️</span><a href="https://www.youtube.com/@metahorizoncreatorprogram" target="_blank" rel="noopener noreferrer">MHCP YouTube</a> – Watch tutorials, learn about the latest Worlds features, and hear directly from Meta product teams</li>
            <li><span class="item-icon" aria-hidden="true">📖</span><a href="https://github.com/MHCPCreators/horizonCreatorManual" target="_blank" rel="noopener noreferrer">Creator Manual</a> – Explore the in-depth creator-made technical manual covering all major Worlds systems</li>
                </ul>
                <p style="text-align:center; margin-top:16px;"><span class="highlight-text">Keep building amazing Worlds!</span> 🌟</p>
            </section>
            <div class="end-links" aria-label="Helpful links">
                <a class="end-link" href="#top">Back to top</a>
                <a class="end-link" href="https://mhcpcreators.github.io/worlds-documentation/" target="_blank" rel="noopener noreferrer">Learn more with MHCP</a>
                <a id="reset-completed" class="end-link" href="#">Reset Completed</a>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar-container">
        <div class="progress-info">
            <span class="progress-text">Progress: 0/30 steps</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
    </div>
</body>
<script>
// Scroll-spy: highlight nav category based on the step in view
(() => {
    const navLinks = Array.from(document.querySelectorAll('.sticky-nav .nav-link'));
    if (!navLinks.length) return;
    const linkById = new Map(navLinks.map(a => [a.getAttribute('href').slice(1), a]));
    const steps = Array.from(document.querySelectorAll('.timeline .step'));

    function getStepNumber(stepEl) {
        const numEl = stepEl.querySelector('.step-number');
        if (numEl && numEl.textContent) {
            const n = parseInt(numEl.textContent.trim(), 10);
            if (!isNaN(n)) return n;
        }
        const title = stepEl.querySelector('.step-title')?.textContent || '';
        const m = title.match(/^(\s*)(\d+)/);
        return m ? parseInt(m[2], 10) : null;
    }

    function categoryForStep(n) {
        if (!n) return null;
        // Find which section this step belongs to by checking the DOM structure
        const stepEl = steps.find(step => getStepNumber(step) === n);
        if (!stepEl) return null;
        
        // Walk up the DOM to find the containing section
        let current = stepEl;
        while (current && current !== document.body) {
            if (current.classList && current.classList.contains('category')) {
                return current.id;
            }
            current = current.parentElement;
        }
        return null;
    }

    let activeId = null;
    // Make activeId globally accessible
    window.activeId = null;
    const visibleSteps = new Map(); // stepEl -> intersectionRatio
    const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                visibleSteps.set(entry.target, entry.intersectionRatio);
            } else {
                visibleSteps.delete(entry.target);
            }
        });
        // Debounce updates to prevent rapid firing
        clearTimeout(updateActive.debounceTimeout);
        updateActive.debounceTimeout = setTimeout(updateActive, 100);
    }, {
        root: null,
        threshold: [0, 0.1, 0.25, 0.5, 0.75, 1],
        // Adjust margins for better mobile responsiveness  
        rootMargin: '-10% 0px -50% 0px'
    });

    steps.forEach(s => io.observe(s));

    function updateActive() {
        // Don't update if user just manually navigated
        if (manualNavigation) return;
        
        if (visibleSteps.size === 0) return;
        let best = null, bestRatio = -1, bestTop = Infinity;
        visibleSteps.forEach((ratio, el) => {
            const rect = el.getBoundingClientRect();
            const top = Math.abs(rect.top);
            if (ratio > bestRatio || (ratio === bestRatio && top < bestTop)) {
                best = el; bestRatio = ratio; bestTop = top;
            }
        });
        const n = getStepNumber(best);
        const id = categoryForStep(n);
        if (id && id !== activeId) {
            activeId = id;
            window.activeId = id; // Update global reference
            navLinks.forEach(a => {
                const isActive = a.getAttribute('href') === '#' + id;
                a.classList.toggle('active', isActive);
                if (isActive) a.setAttribute('aria-current', 'page');
                else a.removeAttribute('aria-current');
            });
            // Update progress bar when section changes
            if (typeof updateProgressBar === 'function') {
                updateProgressBar();
            }
        }
    }

    // On nav click, set active immediately and add a delay before re-enabling auto-update
    let manualNavigation = false;
    navLinks.forEach(a => {
        a.addEventListener('click', (e) => {
            const id = a.getAttribute('href').slice(1);
            activeId = id;
            window.activeId = id; // Update global reference
            manualNavigation = true; // Temporarily disable auto-updates
            
            navLinks.forEach(l => {
                const isActive = l === a;
                l.classList.toggle('active', isActive);
                if (isActive) l.setAttribute('aria-current', 'page');
                else l.removeAttribute('aria-current');
            });
            
            // Update progress bar when nav is clicked
            if (typeof updateProgressBar === 'function') {
                updateProgressBar();
            }
            
            // Re-enable auto-updates after scrolling has settled
            setTimeout(() => {
                manualNavigation = false;
            }, 1000);
        });
    });

    function initFromHash() {
        const hash = location.hash ? location.hash.slice(1) : null;
        if (hash && linkById.has(hash)) {
            activeId = hash;
            navLinks.forEach(a => {
                const isActive = a.getAttribute('href') === '#' + hash;
                a.classList.toggle('active', isActive);
                if (isActive) a.setAttribute('aria-current', 'page');
                else a.removeAttribute('aria-current');
            });
        } else {
            updateActive();
        }
        // Update progress bar after initialization
        if (typeof updateProgressBar === 'function') {
            updateProgressBar();
        }
    }

    window.addEventListener('hashchange', initFromHash);
    window.addEventListener('load', initFromHash);
})();

// Global progress bar update function
function updateProgressBar() {
    const STORAGE_KEY = 'worlds101:steps:v1';
    let state = {};
    try { state = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}') || {}; }
    catch { state = {}; }
    
    const steps = Array.from(document.querySelectorAll('.timeline .step'));
    const totalSteps = steps.length;
    const completedSteps = Object.values(state).filter(Boolean).length;
    
    // Dynamically calculate section progress based on actual DOM structure
    const sectionProgress = {
        'tools-account': { completed: 0, total: 0, name: 'Tools & Account' },
        'world-assets': { completed: 0, total: 0, name: 'World & Assets' },
        'code-systems': { completed: 0, total: 0, name: 'Code & Systems' }
    };
    
    // Helper function to get step number from step element
    function getStepNumber(stepEl) {
        const numEl = stepEl.querySelector('.step-number');
        if (numEl && numEl.textContent) {
            const n = parseInt(numEl.textContent.trim(), 10);
            if (!isNaN(n)) return n;
        }
        const title = stepEl.querySelector('.step-title')?.textContent || '';
        const m = title.match(/^(\s*)(\d+)/);
        return m ? parseInt(m[2], 10) : null;
    }
    
    // Helper function to determine category for a step number
    function categoryForStep(n) {
        if (!n) return null;
        // Find which section this step belongs to by checking the DOM structure
        const stepEl = steps.find(step => getStepNumber(step) === n);
        if (!stepEl) return null;
        
        // Walk up the DOM to find the containing section
        let current = stepEl;
        while (current && current !== document.body) {
            if (current.classList && current.classList.contains('category')) {
                return current.id;
            }
            current = current.parentElement;
        }
        return null;
    }
    
    // Count total steps per section by examining DOM structure
    steps.forEach(stepEl => {
        const stepNum = getStepNumber(stepEl);
        const category = categoryForStep(stepNum);
        if (category && sectionProgress[category]) {
            sectionProgress[category].total++;
        }
    });
    
    // Count completed steps per section
    Object.keys(state).forEach(stepId => {
        if (state[stepId]) {
            const stepNum = parseInt(stepId.replace('step-', ''));
            const category = categoryForStep(stepNum);
            if (category && sectionProgress[category]) {
                sectionProgress[category].completed++;
            }
        }
    });
    
    // Determine current section in view (use the activeId from scroll-spy or default)
    const currentSection = window.activeId || 'tools-account';
    const currentSectionData = sectionProgress[currentSection];
    
    // Calculate progress percentage for current section
    const sectionPercentage = currentSectionData.total > 0 ? 
        (currentSectionData.completed / currentSectionData.total) * 100 : 0;
    
    // Update progress bar to show current section progress
    const progressFill = document.querySelector('.progress-fill');
    if (progressFill) {
        progressFill.style.width = `${sectionPercentage}%`;
        
        // Add completed class when section is 100% done
        if (currentSectionData.completed === currentSectionData.total && currentSectionData.total > 0) {
            progressFill.classList.add('completed');
        } else {
            progressFill.classList.remove('completed');
        }
    }
    
    // Update progress text to show current section
    const progressText = document.querySelector('.progress-text');
    if (progressText) {
        if (currentSectionData.completed === currentSectionData.total && currentSectionData.total > 0) {
            progressText.textContent = `${currentSectionData.name}: ✓ Completed (${currentSectionData.completed}/${currentSectionData.total})`;
            progressText.classList.add('completed');
        } else {
            progressText.textContent = `${currentSectionData.name}: ${currentSectionData.completed}/${currentSectionData.total} steps`;
            progressText.classList.remove('completed');
        }
    }
}

// Step completion persistence: add a "Done" checkbox per step and persist to localStorage
(() => {
    const STORAGE_KEY = 'worlds101:steps:v1';
    const steps = Array.from(document.querySelectorAll('.timeline .step'));
    if (!steps.length) return;

    function getStepNumber(stepEl) {
        const numEl = stepEl.querySelector('.step-number');
        if (numEl && numEl.textContent) {
            const n = parseInt(numEl.textContent.trim(), 10);
            if (!isNaN(n)) return n;
        }
        const title = stepEl.querySelector('.step-title')?.textContent || '';
        const m = title.match(/^(\s*)(\d+)/);
        return m ? parseInt(m[2], 10) : null;
    }

    let state = {};
    try { state = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}') || {}; }
    catch { state = {}; }

    steps.forEach((step, idx) => {
        const content = step.querySelector('.step-content');
        if (!content) return;
        const n = getStepNumber(step) ?? (idx + 1);
        const id = `step-${n}`;

        // Create the toggle UI
        const label = document.createElement('label');
        label.className = 'complete-toggle';
    label.setAttribute('aria-label', `Mark step ${n} Completed`);

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'complete-checkbox';
        checkbox.checked = !!state[id];

    const text = document.createElement('span');
    text.textContent = 'Mark Completed';

        label.appendChild(checkbox);
        label.appendChild(text);
        content.appendChild(label);

        function applyVisual() {
            content.classList.toggle('completed', checkbox.checked);
        }
        applyVisual();

        checkbox.addEventListener('change', () => {
            state[id] = checkbox.checked;
            try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } catch {}
            applyVisual();
            updateProgressBar();
        });
    });

    // Initial progress bar update
    updateProgressBar();
})();

// Reset progress: clears saved completion state and updates UI
(() => {
    const RESET_ID = 'reset-completed';
    const STORAGE_KEY = 'worlds101:steps:v1';
    const link = document.getElementById(RESET_ID);
    if (!link) return;
    link.addEventListener('click', (e) => {
        e.preventDefault();
        try { localStorage.removeItem(STORAGE_KEY); } catch {}
        // Uncheck all checkboxes and remove completed styling
        document.querySelectorAll('.complete-checkbox').forEach(cb => {
            if (cb instanceof HTMLInputElement) {
                cb.checked = false;
                const content = cb.closest('.step-content');
                content && content.classList.remove('completed');
            }
        });
        // Update progress bar after reset
        updateProgressBar();
    });
})();
</script>
</html>
